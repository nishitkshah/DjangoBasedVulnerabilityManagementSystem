from django.shortcuts import render
import requests
from .util import get_all_node_risk_scores, get_node_risk_score, get_resource_risk_score
import json

def nodes(request):
    data = get_all_node_risk_scores()
    print(data)
    # data = [{"id": "5b1e6e7602e4d60939ae3a38", "node_name": "123.456.789.012:34567", "risk_score": 1},]
    return render(request, "nodes.html", {"data": data})

def node(request, pk):
    data = get_node_risk_score(pk)
    return render(request, "node.html", {"data": json.dumps(data)})

def resource(request, pk, r_id):
    data = get_resource_risk_score(pk, r_id)
    return render(request, "resource.html", {"resource_data": json.dumps(data)})

